# ðŸš€ Irresistible tmux configuration for Arch Linux
# Last updated: July 3, 2025

# ======================================================
# CORE SETTINGS
# ======================================================

# --- Terminal Settings ---
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# --- Performance Settings ---
set -sg escape-time 0            # Remove delay for faster key response
set -g history-limit 50000       # Larger history
set -g focus-events on           # Better integration with vim/nvim
set -g status-interval 1         # Update status bar every second

# --- Usability Settings ---
set -g mouse on                  # Enable mouse support
set -g base-index 1              # Start window numbering at 1
setw -g pane-base-index 1        # Start pane numbering at 1

# ======================================================
# KEY BINDINGS
# ======================================================

# --- Prefix Setting ---
set -g prefix C-a               # Change prefix to Ctrl+a
unbind C-b                      # Remove default prefix
bind C-a send-prefix            # Send prefix to nested tmux

# --- Window Management ---
# Smart split creation with current path
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
bind r command-prompt -I "#W" "rename-window '%%'"

# --- Pane Navigation ---
# Quick pane switching with Alt+arrow keys
bind -n M-h select-pane -L      # Left
bind -n M-j select-pane -D      # Down
bind -n M-k select-pane -U      # Up
bind -n M-l select-pane -R      # Right

# --- Window Navigation ---
bind -n M-1 select-window -t 1  # Alt+1 for window 1
bind -n M-2 select-window -t 2  # Alt+2 for window 2
bind -n M-3 select-window -t 3  # Alt+3 for window 3
bind -n M-4 select-window -t 4  # Alt+4 for window 4
bind -n M-5 select-window -t 5  # Alt+5 for window 5

# --- Pane Resizing ---
bind -r H resize-pane -L 5      # Resize left
bind -r J resize-pane -D 5      # Resize down
bind -r K resize-pane -U 5      # Resize up
bind -r L resize-pane -R 5      # Resize right

# --- Additional Bindings ---
# Reload tmux configuration
bind R source-file ~/.tmux.conf \; display "Config reloaded!"
# Toggle synchronized panes
bind S setw synchronize-panes \; display "Sync #{?pane_synchronized,ON,OFF}"

# --- Copy Mode ---
setw -g mode-keys vi
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# ======================================================
# VISUAL STYLING (CATPPUCCIN MOCHA)
# ======================================================

# --- Colors ---
# Catppuccin Mocha palette
thm_bg="#1e1e2e"
thm_fg="#cdd6f4"
thm_cyan="#89dceb"
thm_black="#181825"
thm_gray="#313244"
thm_magenta="#cba6f7"
thm_pink="#f5c2e7"
thm_red="#f38ba8"
thm_green="#a6e3a1"
thm_yellow="#f9e2af"
thm_blue="#89b4fa"
thm_orange="#fab387"
thm_black4="#585b70"

# --- Status Bar ---
# Basic status bar colors
set -g status-style "bg=$thm_bg,fg=$thm_fg"
set -g status-left-length 100
set -g status-right-length 100
set -g status-justify centre
set -g status-position bottom

# Left status - Session name and window indicator
set -g status-left "#[fg=$thm_bg,bg=$thm_blue,bold] #S #[fg=$thm_blue,bg=$thm_gray] "
set -g status-left-style "none"

# Right status - Host, date, and time
set -g status-right "#[fg=$thm_magenta,bg=$thm_gray] #[fg=$thm_bg,bg=$thm_magenta] #H "
set -g status-right-style "none"

# Window status - Not current
setw -g window-status-format "#[fg=$thm_fg,bg=$thm_gray] #I:#W "
setw -g window-status-style "none"

# Window status - Current window
setw -g window-status-current-format "#[fg=$thm_bg,bg=$thm_orange,bold] #I:#W "
setw -g window-status-current-style "none"

# Pane styling
set -g pane-border-style "fg=$thm_gray"
set -g pane-active-border-style "fg=$thm_blue"
set -g display-panes-active-colour "$thm_blue"
set -g display-panes-colour "$thm_gray"

# Message styling
set -g message-style "fg=$thm_fg,bg=$thm_black"

# ======================================================
# PLUGINS
# ======================================================

# Plugin manager
set -g @plugin 'tmux-plugins/tpm'

# Essential plugins
set -g @plugin 'tmux-plugins/tmux-sensible'    # Sensible defaults
set -g @plugin 'tmux-plugins/tmux-resurrect'   # Session saving/restore
set -g @plugin 'tmux-plugins/tmux-continuum'   # Auto-save sessions
set -g @plugin 'tmux-plugins/tmux-yank'        # Better copy mode
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # Show when prefix is active

# Plugin configuration
set -g @resurrect-capture-pane-contents 'on'   # Capture pane content
set -g @continuum-restore 'on'                 # Auto restore
set -g @continuum-save-interval '10'           # Save every 10 minutes

# Initialize TMUX plugin manager (keep this at the very bottom)
run '~/.tmux/plugins/tpm/tpm'
